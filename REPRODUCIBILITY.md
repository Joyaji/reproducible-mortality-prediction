# Reproducibility Guide

## üìã Overview

This project follows open-source and reproducibility best practices as described in the technical paper ([docs/reproducible-mortality-prediction.pdf](docs/reproducible-mortality-prediction.pdf)). This document explains what is versioned and why.

## ‚úÖ What is Versioned

### **1. Source Code (Complete)**
```
src/               # All training, evaluation, and data generation scripts
scripts/           # Auxiliary scripts
requirements.txt   # Python dependencies with versions
config/            # Configuration files
```

### **2. Documentation (Complete)**
```
README.md                                    # Project overview and setup instructions
docs/reproducible-mortality-prediction.pdf   # Technical paper (compiled)
results/TECHNICAL_REPORT.md                  # Generated technical report (reference)
docs/                                        # Additional documentation
```

### **3. Reference Results (Selective)**
```
results/TECHNICAL_REPORT.md              # Generated report
results/test_metrics_calibrated.json     # Final metrics
results/kfold_validation.json            # K-Fold results
results/training_config_calibrated.json  # Training configuration

# Sample visualizations (3 representative plots):
results/plots/roc_curve.png
results/plots/summary_metrics.png
results/plots/comparison_table.png
```

### **4. Synthetic Data (Example)**

```
data/mimic3_synthetic_v3/  # Small example dataset for testing
```

**Note:** Full synthetic datasets are not versioned due to size. They can be regenerated using `src/generate_synthetic_data.py`.

## ‚ùå What is NOT Versioned

### **1. Large Files**
- **Models** (`models/*.keras`, `models/*.pkl`) - ~100MB each
  - Can be regenerated by training or downloaded from releases
  - Consider using Git LFS for production
  
- **Full Datasets** - Hundreds of MB
  - Synthetic data: regenerate with `src/generate_synthetic_data.py`
  - Real MIMIC-III: requires PhysioNet credentialing

- **All Visualizations** - 14 plots √ó ~200KB = ~3MB
  - Can be regenerated with `python src/generate_plots.py`
  - 3 representative plots included as reference

### **2. Temporary Files**
- Logs (`logs/`)
- Predictions cache (`results/*.npy`)
- Python cache (`__pycache__/`)



## üîÑ Reproduction Steps

### **Option 1: From Scratch (Full Reproduction)**

1. **Setup environment:**

   ```bash
   python -m venv venv
   source venv/bin/activate  # or `venv\Scripts\activate` on Windows
   pip install -r requirements.txt
   ```

2. **Generate synthetic data:**

   ```bash
   python src/generate_synthetic_data.py --version v3 --size small
   ```

3. **Train baseline:**

   ```bash
   python src/train_baseline.py
   ```

4. **Train deep learning model:**

   ```bash
   python src/train_dl.py --epochs 50 --batch-size 32
   ```

5. **Generate visualizations:**


   ```bash
   python src/generate_plots.py
   ```

6. **Generate technical report:**


   ```bash
   python src/generate_report.py
   ```

### **Option 2: Using Pre-trained Models (Quick Start)**

1. **Download models from releases:**


   ```bash
   # Download from GitHub releases or use provided models
   # Place in models/ directory
   ```

2. **Generate predictions:**


   ```bash
   python generate_predictions.py  # Creates test_predictions.npy
   ```

3. **Generate visualizations and report:**


   ```bash
   python src/generate_plots.py
   python src/generate_report.py
   ```

## üìä Expected Results

After full reproduction, you should obtain:

- **AUROC:** ~0.86 (¬±0.02)
- **AUPRC:** ~0.64 (¬±0.03)
- **Recall:** ~0.97 (¬±0.01)
- **Precision:** ~0.35 (¬±0.02)

**Note:** Exact values may vary slightly due to:
- Random initialization
- Synthetic data generation randomness
- Hardware differences (CPU vs GPU)

## üîê Data Access

### **Synthetic Data**
- ‚úÖ Included in repository (small example)
- ‚úÖ Can be regenerated with provided scripts
- ‚úÖ No restrictions

### **Real MIMIC-III Data**
- ‚ùå NOT included (requires PhysioNet credentialing)
- ‚ùå Cannot be shared publicly
- ‚úÖ Access instructions: https://physionet.org/content/mimiciii/

## üì¶ Git LFS (Optional)

For production deployments, consider using Git LFS for large files:

```bash
git lfs install
git lfs track "models/*.keras"
git lfs track "models/*.pkl"
git lfs track "data/mimic3_synthetic_v3/**/*.csv"
```

## ü§ù Contributing

When contributing:

1. ‚úÖ Include all source code changes
2. ‚úÖ Update documentation
3. ‚úÖ Regenerate `TECHNICAL_REPORT.md` if metrics change
4. ‚ùå Do NOT commit large model files (use releases)
5. ‚ùå Do NOT commit full datasets (provide generation scripts)

## üìö References

- Main paper: [docs/reproducible-mortality-prediction.pdf](docs/reproducible-mortality-prediction.pdf)
- Technical report: `results/TECHNICAL_REPORT.md`
- Setup guide: `README.md`

---

**Last Updated:** October 11, 2025
